- [es面试题汇总](#es面试题汇总)

## es面试题汇总

### 1.es的正排索引和倒排索引
正排索引一般是 由文档查关键字

倒排索引是由关键字查文档

通过分词策略形成了关键字和文档内容的映射关系，叫倒排表

| id   | name | age  | sex  |
| ---- | ---- | ---- | ---- |
| 1    | 张三 | 11   | 男   |
| 2    | 李四 | 10   | 女   |
| 3    | 王五 | 12   | 女   |

es为每一个Field建立索引，分别是name，age，sex

| term（关键字） | posting list（倒排列表） |
| -------------- | ------------------------ |
| 张三           | [1]                      |
| 李四           | [2]                      |
| 王五           | [3]                      |

| term（关键字） | posting list（倒排列表） |
| -------------- | ------------------------ |
| 10             | [2]                      |
| 11             | [1]                      |
| 12             | [3]                      |

| term（关键字） | posting list（倒排列表） |
| -------------- | ------------------------ |
| 男             | [1]                      |
| 女             | [2,3]                    |

## 2.ES的字符串类型keyword和text的区别
text用于全文搜索，keyword用于关键字搜索 

他们最大的区别是是否用了分词器进行分词 

text类型：

- 会进行分词，然后建立索引【比如：对于‘佟永硕’，ik分词器的smart分词会自动将其分成佟、永、硕三个字符进行建立索引，所以单字符搜索可以搜索到，而比如‘永硕’则搜索不到】
- 支持模糊查询，支持准确查询
- 不支持聚合查询

keyword：

- 不分词，直接建立索引【依据此特点，可以使用keyword类型+wildcardQuery（通配查询）实现类似sql的like查询（模糊搜索）】
- 支持模糊查询，支持准确查询
- 支持聚合查询

